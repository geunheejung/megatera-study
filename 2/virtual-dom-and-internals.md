# Virtual DOM and Internals

UI의 이상적인 또는 "가상" 표현을 메모리에 보관, ReactDOM과 같은 라이브러리에 의해 실제 "DOM"과 동기화되는 프로그래밍 개념



이 과정을 재조정이라 한다.



이 접근 방식은 React의 선언적 API를 가능하게 한다.&#x20;

UI가 어떤 상태가 되기를 원하는지 알려주면, React는 DOM이 그 상태와 일치하는지 확인한다.

앱을 빌드할 때 사용해야 하는 Attritibute 조작, Event 처리, 수동 DOM 업데이트를 추상화할 수 있다.



"가상 DOM"은 특정 기술이라기보다 패턴에 가깝다.

React 세계에서 VDOM 이라는 용어는 일반적으로 사용자 인터페이스를 나타내는 객체

React Element와 연관된다.

React는 컴포넌트 트리에 대한 추가 정보를 저장하기 위해 "Fiber"라는 내부 객체도 사용한다.

이 객체들은 리액트에서 가상 DOM구현의 일부로 간주될 수 있다.



Shadow DOM은 Virtual DOM과 동일한가?

다르다.

Shadow DOM은 주로 웹 컴포넌트에서 변수, CSS의 범위를 지정하기 위해 설계된 브라우저 기술이다.



가상 DOM은 브라우저 API 위에 자바스크립트 라이브러리로 구현된 개념이다.



#### 사담

가상 DOM이라 하면, Dan이 얘기했던것처럼 호스트 트리를 만들고 이 호스트 트리와 DOM 트리간의 업데이트를 재조정을 통해 효율적으로 해주는 패턴이지 않을까?



위에 얘기한것처럼 DOM Node의 속성 조작, Event 처리, 수동 DOM 업데이트를 추상화해주고(setState, render, props)

호스트 트리와 실제 DOM과 동기화하는 하는 작업을 재조정을 통해 동기화 하고.

우리는 가상 DOM이라는 패턴을 통해 UI의 변화에 대해 추상화 하여 제공해주는 React와 React DOM 덕분에 선언적으로 어떤 상태일 경우에 어떤 화면을 그려줘! 라고 사용할 수 있는 것이고..



일반적으로 사용자 인터페이스를 나타내는 객체라 하면 호스트 트리의 개념처럼 브라우저의 DOM에 국한된 것이 아닌, 환경에 따라서 iOS가 될 수도 있고 함



하지만 공통적인것은, 가상 DOM이라는 패턴을 통해 DOM과 동기화 해주는 React DOM 덕분에 우리는 구체적으로 어떻게 UI를 바꾸는지의 대해 알 필요 없이 그리고, 버튼을 클릭 했을 때, 직접 버튼 엘리먼트에 접근에 값을 바꾼다 라든지의 명령형이 아닌&#x20;

이러한 데이터면 이러한 값을 그려 라는 선언형으로 UI를 조작할 수 있는게 아닐까?



#### VDOM은 빨라서 사용한다?

***

가상 돔은 충분히 빠르다. 하지만 속도 때문에 사용하는것은 아니다.

가상 DOM을 통해서, 브라우저의 UI 변화를 선언적으로 다룰 수 있게 되며&#x20;

사용자는 UI가 어떤 상태에서 어떻게 그려지길 원하는지 선언만 해놓으면 DOM을 어떻게 접근하고, 어떤 속성을 바꾸고, 어떤 속성은 안바꿔도 되는지의 대해 신경 쓰지 않아도 된다.



jQuery는 편리했다. 편리하지만, 유지 보수면에서 좋진 못했다.

엘리먼트의 depth가 조금만 바뀌더라도 소스 코드를 다시 봐야했다.



React는 DOM보다 빠르다.

Reality: 유지보수가 가능한 애플리케이션을 만드는 데 도움이 되며, 대부분의 사용 사례에서 충분히 빠르다.



DOM 노드에서 **불필요하게 잘못된 순서(쓰기, 읽기)로 업데이트하거나 읽으면 성능에 좋지 않다.**



업데이트할 때마다 너무 많은 React 컴포넌트 레이어를 조정하는 것도 마찬가지이다.



VDOM이 토론에 도움이 되지 않는 이유다.



트리 구조가 있지만, "렌더링할 때마다 새로운 가상 DOM 트리"가 아니라 제자리에서 업데이트된다.





